(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-host-game_one-change_vote-change"],{1074:function(t,e,a){"use strict";a.r(e);var i=a("5e0e"),n=a("d0c4");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("ae8c");var r,s=a("f0c5"),l=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"69fbd04d",null,!1,i["a"],r);e["default"]=l.exports},4164:function(t,e,a){var i=a("5d39");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("d79b5b1e",i,!0,{sourceMap:!1,shadowMode:!1})},"5d39":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".player_list[data-v-69fbd04d]{color:#333;font-size:%?28?%;font-weight:700}.item[data-v-69fbd04d]{margin-bottom:%?20?%}.name[data-v-69fbd04d]{margin-right:%?24?%;width:%?27?%}.l_view[data-v-69fbd04d]{margin-right:%?38?%}.r_view[data-v-69fbd04d]{border-bottom:1px solid #ffecdb;padding:%?40?% 0;width:100%}.r_view .com_btn[data-v-69fbd04d]{font-size:%?24?%;padding:%?10?% 0;width:%?105?%}.footer_btn[data-v-69fbd04d]{margin:%?80?% 0}",""]),t.exports=e},"5e0e":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"player_list",staticStyle:{"margin-bottom":"100rpx","margin-left":"240rpx"}},[a("v-uni-view",{staticClass:"user_view flex_al"},[a("v-uni-view",{staticClass:"l_view flex_col flex_al"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:t.player.roleHead}})],1),a("v-uni-view",[t._v(t._s(t.player.roleName))])],1),a("v-uni-view",{staticStyle:{"margin-left":"20rpx"}},[a("v-uni-view",{staticClass:"text_view flex_al",staticStyle:{"padding-top":"15rpx"}},[a("v-uni-text",{staticClass:"t1"},[t._v("剩余票数")]),a("v-uni-text",{staticClass:"t2",staticStyle:{"padding-left":"10rpx"}},[t._v(t._s(t.player.ticketNo))])],1)],1)],1)],1),a("v-uni-view",{staticClass:"player_list"},t._l(t.player.items,(function(e,i){return t.playerId!=e.playerId?a("v-uni-view",{key:e.voteId,staticClass:"item flex_al_sb"},[a("v-uni-view",{staticClass:"l_view flex_al"},[a("v-uni-view",{staticClass:"name"},[t._v(t._s(e.roleName))]),a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:e.roleHead}})],1)],1),a("v-uni-view",{staticClass:"r_view flex_al_sb"},[a("v-uni-view",{staticClass:"t1"},[t._v("当前投票数")]),a("v-uni-view",{staticClass:"input_view"},[a("v-uni-input",{attrs:{placeholder:"0",type:"number"},model:{value:e.voteNo,callback:function(a){t.$set(e,"voteNo",a)},expression:"item.voteNo"}})],1),a("v-uni-view",{staticClass:"com_btn",attrs:{"data-index":i,"data-no":e.voteNo},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.ChangeVote.apply(void 0,arguments)}}},[t._v("变更")])],1)],1):t._e()})),1),a("v-uni-view",{staticClass:"footer_btn flex_al_sb"},[a("v-uni-view",{staticClass:"com_btn",staticStyle:{width:"100%"},attrs:{hoverClass:"active"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.goEnd.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)},o=[]},"73b6":function(t,e,a){"use strict";a("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("ee06")(a("5285")),n=a("c5a9"),o=getApp(),r={data:function(){return{player:[],playerId:0,playerData:[],ticketNo:0}},onLoad:function(t){this.setData({playerId:t.playerId});var e=this.$playerData;this.playerData=e;for(var a={},i=[],n=0;n<e.length;n++){var o={voteNo:0,old:0,roleName:e[n].roleName,roleHead:e[n].roleHead,voteId:e[n].voteId,playerId:e[n].playerId};this.playerId==e[n].playerId&&(a=e[n],this.ticketNo=e[n].ticketNo),i.push(o)}a.items=i,this.player=a},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{changeVoteNo:function(t){var e=t.currentTarget.dataset.index,a=this.player;a.items[e].voteNo=+t.detail.value,this.setData({player:a})},ChangeVote:function(t){var e=this,a=t.target.dataset.index;return o.globalData.Confirm("是否确认变更票数?").then((function(){var t=e.countTicketNo();if(t<=e.ticketNo){e.player.items[a].old=e.player.items[a].voteNo;var i=e.countTicketNo();e.player.ticketNo=parseInt(e.ticketNo)-i}})),!1},countTicketNo:function(){for(var t=0,e=this.player.items,a=0;a<e.length;a++)t+=parseInt(e[a].old);return t},goEnd:function(){for(var t=this.playerData,e=this.player.items,a=0;a<t.length;a++)t[a].castNo=parseInt(t[a].castNo)+parseInt(e[a].old);uni.reLaunch({url:"../end/end"})},QueryVoteLogList:function(){var t=this;return n(i.default.mark((function e(){var a,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.playerId,e.next=3,o.globalData.Api.QueryVoteLogList(a);case 3:(n=e.sent).isOk?t.setData({player:n.content}):o.globalData.Toast(n.message);case 5:case"end":return e.stop()}}),e)})))()}}};e.default=r},ae8c:function(t,e,a){"use strict";var i=a("4164"),n=a.n(i);n.a},d0c4:function(t,e,a){"use strict";a.r(e);var i=a("73b6"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a}}]);