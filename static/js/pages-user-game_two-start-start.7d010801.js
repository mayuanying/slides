(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-game_two-start-start"],{"0074":function(t,a){var e=0;function i(t){return"__private_"+e+++"_"+t}t.exports=i},"0ccb":function(t,a,e){var i=e("50c4"),n=e("1148"),o=e("1d80"),r=Math.ceil,s=function(t){return function(a,e,s){var c,l,d=String(o(a)),u=d.length,v=void 0===s?" ":String(s),f=i(e);return f<=u||""==v?d:(c=f-u,l=n.call(v,r(c/v.length)),l.length>c&&(l=l.slice(0,c)),t?d+l:l+d)}};t.exports={start:s(!1),end:s(!0)}},1148:function(t,a,e){"use strict";var i=e("a691"),n=e("1d80");t.exports="".repeat||function(t){var a=String(n(this)),e="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(a+=a))1&o&&(e+=a);return e}},"14c6":function(t,a,e){"use strict";e("99af"),e("d3b7"),e("25f0"),e("4d90"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=e("ee06"),n=(i(e("5285")),e("c5a9"),i(e("a2af"))),o=getApp(),r={data:function(){return{timer:void 0,djs:0,djsText:"DM准备中",stage:1,dataObj:{campName:0,scoutNo:0,items:[{recruitId:1,capital:1,capitalName:"tainzi",dispatchNo:124}]},userInfo:{roleHead:"",roleName:""},chaTimer:null,tanchuang:!1,dispatchNo:"",recruitId:"",surplusTime:100}},onLoad:function(){this.setData({userInfo:uni.getStorageSync("userInfo")||{}}),this.startVote()},onReady:function(){},onShow:function(){uni.getStorageSync("two_stage")||uni.setStorageSync("two_stage",1),this.setData({stage:uni.getStorageSync("two_stage")})},onHide:function(){},onUnload:function(){this.timer&&this.timer.dispose()},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{reload:function(){this.startVote()},goPaimai:function(){uni.navigateTo({url:"/pages/user/game_two/auction/auction"})},clearTc:function(){this.setData({tanchuang:!1,recruitId:""})},changeNumValue:function(t){this.setData({dispatchNo:t.detail.value})},confirmPq:function(){return o.globalData.Confirm("是否确定派遣？").then((function(){})),!1},pq:function(t){if("DM准备中"==this.djsText)return o.globalData.Toast("当前还不可派遣哦~"),!1;this.setData({recruitId:t.currentTarget.dataset.id,tanchuang:!0})},nextPage:function(){var t=this;1==this.stage&&o.globalData.Confirm("是否前往下一轮？").then((function(){t.timer&&t.timer.dispose(),t.setData({stage:2,djsText:"DM准备中"}),uni.setStorage({key:"two_stage",data:2,success:function(){t.QueryRecruitInfo(),t.startVote()}})})).catch((function(){})),2==this.stage&&o.globalData.Confirm("是否退出游戏？").then((function(){uni.removeStorageSync("two_stage"),t.timer&&t.timer.dispose(),uni.navigateTo({url:"../../login/login"})})).catch((function(){}))},startVote:function(){var t=this;this.initTimer();var a=this.surplusTime;console.log(a),a>0?(t.setData({djsText:"倒计时准备中，请稍等"}),t.timer&&t.timer.start(a)):t.setData({djsText:"倒计时已结束"})},initTimer:function(){this.timer&&this.timer.dispose();var t=this.setData.bind(this),a=new n.default({delay:0,onInterval:function(a){var e=Math.floor(a/60),i=a-60*e;t({djsText:"".concat(e.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))})},onAbort:function(){console.log("aborted")},onComplete:function(){t({djsText:"倒计时已结束"})},onError:function(t){console.log("发生错误",t)}});this.setData({timer:a})},QueryRecruitInfo:function(){return!1}}};a.default=r},"1c85":function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"user_view flex_al_sb"},[e("v-uni-view",{staticClass:"l_view flex_al"},[e("v-uni-view",{staticClass:"head_img"},[e("v-uni-image",{attrs:{mode:"widthFix",src:t.userInfo.roleHead}})],1),e("v-uni-view",{staticClass:"name"},[t._v(t._s(t.userInfo.roleName))])],1),e("v-uni-view",{staticClass:"r_view flex_col"},[e("v-uni-view",{staticClass:"t flex_al uni-flex"},[e("v-uni-text",{staticClass:"t1"},[t._v("所属联盟")]),e("v-uni-input",{staticStyle:{width:"70px",display:"inline-block","text-align":"right","font-size":"14px"},attrs:{type:"text"},model:{value:t.dataObj.campName,callback:function(a){t.$set(t.dataObj,"campName",a)},expression:"dataObj.campName"}})],1),e("v-uni-view",{staticClass:"b flex_al"},[e("v-uni-text",{staticClass:"t1"},[t._v("斥候数")]),e("v-uni-input",{staticStyle:{width:"70px",display:"inline-block","text-align":"right","font-size":"14px"},attrs:{type:"text"},model:{value:t.dataObj.scoutNo,callback:function(a){t.$set(t.dataObj,"scoutNo",a)},expression:"dataObj.scoutNo"}})],1)],1)],1),e("v-uni-view",{staticClass:"map_view"},[e("v-uni-image",{staticClass:"bg",attrs:{mode:"widthFix",src:"/static/images/map.png"}}),t._l(t.dataObj.items,(function(a,i){return e("v-uni-view",{key:a.capital,class:"t flex_al t"+i+1,attrs:{"data-id":a.recruitId},on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.pq.apply(void 0,arguments)}}},[e("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/dingwei.png"}}),e("v-uni-text",{staticClass:"t_1"},[t._v(t._s(a.capitalName))]),e("v-uni-text",{staticClass:"t_2"},[t._v(t._s(a.dispatchNo))])],1)}))],2),e("v-uni-view",{class:"pq_view"+(t.tanchuang?"active":"")},[e("v-uni-view",{staticClass:"pq_box"},[e("v-uni-view",{staticClass:"title"},[t._v("请输入派遣数")]),e("v-uni-view",{staticClass:"input_view"},[e("v-uni-input",{attrs:{placeholder:"派遣数",type:"number"},model:{value:t.dispatchNo,callback:function(a){t.dispatchNo=a},expression:"dispatchNo"}})],1),e("v-uni-view",{staticClass:"foot_btn flex_al"},[e("v-uni-view",{staticClass:"clear",on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.clearTc.apply(void 0,arguments)}}},[t._v("取消")]),e("v-uni-view",{staticClass:"confirm",on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.confirmPq.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1),2==t.stage?[e("v-uni-view",{staticClass:"com_btn",attrs:{hoverClass:"active"},on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.goPaimai.apply(void 0,arguments)}}},[t._v("拍卖")]),e("v-uni-view",{staticClass:"com_btn",attrs:{hoverClass:"active"},on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.nextPage.apply(void 0,arguments)}}},[t._v("退出游戏")])]:t._e(),e("v-uni-view",{staticClass:"com_btn",on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.reload.apply(void 0,arguments)}}},[t._v("刷新倒计时")]),1==t.stage?e("v-uni-view",{staticClass:"com_btn",attrs:{hoverClass:"active"},on:{click:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.nextPage.apply(void 0,arguments)}}},[t._v("前往下一轮")]):t._e()],2)},o=[]},"37a3":function(t,a,e){"use strict";e.r(a);var i=e("14c6"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},"37af":function(t,a,e){"use strict";var i=e("b8f7"),n=e.n(i);n.a},"4d90":function(t,a,e){"use strict";var i=e("23e7"),n=e("0ccb").start,o=e("9a0c");i({target:"String",proto:!0,forced:o},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"4f6d":function(t,a){function e(t,a){if(!Object.prototype.hasOwnProperty.call(t,a))throw new TypeError("attempted to use private field on non-instance");return t}t.exports=e},"9a0c":function(t,a,e){var i=e("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},a2af:function(t,a,e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=e("ef26"),n=e("d123"),o=e("4f6d"),r=e("0074"),s={interval:1,delay:0,onInterval:void 0,onAbort:void 0,onComplete:void 0,onError:void 0},c=function(t){return"function"==typeof t?t:function(){}},l=function(t,a){try{c(t)()}catch(t){c(a)(t)}},d=r("options"),u=r("globalTimer"),v=r("intervalTimer"),f=r("seconds"),p=r("completed"),h=r("disposed"),g=function(){function t(a){i(this,t),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:!0}),Object.defineProperty(this,h,{writable:!0,value:!1});var e=Object.assign({},s,a);o(this,d)[d]=e}return n(t,[{key:"start",value:function(t){var a=this;if("number"!=typeof t||t<1)throw new Error("The value of duration must be a number and can not less than 1 !");this.abort();var e=o(this,d)[d],i=e.interval,n=e.delay,r=e.onInterval,s=e.onComplete,c=e.onError;o(this,f)[f]=t;var h=function(){o(a,f)[f]-=i,l((function(){return r(o(a,f)[f])}),c)},g=function(){o(a,v)[v]=clearInterval(o(a,v)[v]),o(a,p)[p]=!0,l(s,c)},m=function(){o(a,p)[p]=!1,o(a,u)[u]=setTimeout(g,1e3*t),o(a,v)[v]=setInterval(h,1e3*i)};n>0?o(this,u)[u]=setTimeout((function(){o(a,u)[u]=clearTimeout(o(a,u)[u]),m()}),1e3*n):m()}},{key:"abort",value:function(){if(function(t){if(t)throw new Error("The instance of timer has been disposed !")}(o(this,h)[h]),o(this,u)[u]=clearTimeout(o(this,u)[u]),o(this,v)[v]=clearInterval(o(this,v)[v]),!o(this,p)[p]){var t=o(this,d)[d],a=t.onAbort,e=t.onError;l(a,e)}}},{key:"dispose",value:function(){o(this,h)[h]||(this.abort(),o(this,h)[h]=!0)}}]),t}();a.default=g},b8f7:function(t,a,e){var i=e("d08c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("5c54a50a",i,!0,{sourceMap:!1,shadowMode:!1})},c87c:function(t,a,e){"use strict";e.r(a);var i=e("1c85"),n=e("37a3");for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("37af");var r,s=e("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"d426a80a",null,!1,i["a"],r);a["default"]=c.exports},d08c:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".map_view[data-v-d426a80a]{height:%?348?%;position:relative;width:100%}.map_view .bg[data-v-d426a80a]{display:block;left:0;position:absolute;top:0;width:100%}.map_view .t[data-v-d426a80a]{align-items:center;color:#fff;display:flex;position:absolute}.map_view .t uni-image[data-v-d426a80a]{height:%?21?%;width:%?18?%}.map_view .t .t_1[data-v-d426a80a]{font-size:%?26?%;margin-left:%?7?%;margin-right:%?10?%}.map_view .t .t_2[data-v-d426a80a]{font-size:%?28?%}.map_view .t1[data-v-d426a80a]{left:%?220?%;top:%?64?%}.map_view .t2[data-v-d426a80a]{left:%?411?%;top:%?42?%}.map_view .t3[data-v-d426a80a]{left:%?307?%;top:%?104?%}.map_view .t4[data-v-d426a80a]{left:%?472?%;top:%?102?%}.map_view .t5[data-v-d426a80a]{left:%?167?%;top:%?178?%}.map_view .t6[data-v-d426a80a]{left:%?305?%;top:%?203?%}.map_view .t7[data-v-d426a80a]{left:%?439?%;top:%?182?%}.user_view[data-v-d426a80a]{border:%?1?% solid var(--color);color:var(--color);font-weight:700;margin-bottom:%?80?%;padding:%?25?%}.user_view .head_img[data-v-d426a80a]{height:%?163?%;margin-right:%?20?%;width:%?165?%}.user_view .head_img[data-v-d426a80a],\r\n.user_view .l_view[data-v-d426a80a]{flex-shrink:0}.user_view .name[data-v-d426a80a]{font-size:%?32?%;line-height:%?34?%;width:%?34?%}.user_view .t[data-v-d426a80a]{margin-bottom:%?20?%}.user_view .r_view .t2[data-v-d426a80a]{border-left:%?1?% solid var(--color);display:inline-block;font-size:%?28?%;height:%?32?%;line-height:%?32?%;margin-left:%?30?%;padding-left:%?30?%}.daojishi_view[data-v-d426a80a]{background-color:#fff4d1;height:%?210?%;margin-bottom:%?86?%;width:100%}.daojishi_view uni-text[data-v-d426a80a]{color:#482f19;font-weight:700}.daojishi_view .t1[data-v-d426a80a]{font-size:%?32?%}.daojishi_view .t2[data-v-d426a80a]{font-size:%?58?%}.com_btn[data-v-d426a80a]{margin:%?80?% 0}.pq_view[data-v-d426a80a]{align-items:center;background-color:rgba(0,0,0,.7);display:flex;height:100%;justify-content:center;left:0;opacity:0;position:fixed;top:0;transition:opacity .3s;width:100%;z-index:-1}.pq_view.active[data-v-d426a80a]{opacity:1;z-index:10}.pq_view .pq_box[data-v-d426a80a]{align-items:center;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;overflow:hidden;width:70%}.pq_box .title[data-v-d426a80a]{margin-top:%?20?%}.pq_box .input_view[data-v-d426a80a]{margin:%?40?% 0;width:90%}.input_view uni-input[data-v-d426a80a]{border:%?1?% solid #e4e4e4;border-radius:3px;padding:%?10?% 0;width:100%}.foot_btn[data-v-d426a80a]{width:100%}.foot_btn uni-view[data-v-d426a80a]{align-items:center;border-top:%?1?% solid #e4e4e4;box-sizing:border-box;display:flex;justify-content:center;padding:%?20?% 0;width:50%}.foot_btn uni-view[data-v-d426a80a]:last-child{border-left:%?1?% solid #e4e4e4}",""]),t.exports=a},d123:function(t,a){function e(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}t.exports=i},ef26:function(t,a){function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}t.exports=e}}]);