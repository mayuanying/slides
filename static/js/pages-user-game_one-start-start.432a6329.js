(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-game_one-start-start"],{"0074":function(t,e){var i=0;function n(t){return"__private_"+i+++"_"+t}t.exports=n},"0ccb":function(t,e,i){var n=i("50c4"),a=i("1148"),r=i("1d80"),o=Math.ceil,s=function(t){return function(e,i,s){var c,u,l=String(r(e)),d=l.length,f=void 0===s?" ":String(s),v=n(i);return v<=d||""==f?l:(c=v-d,u=a.call(f,o(c/f.length)),u.length>c&&(u=u.slice(0,c)),t?l+u:u+l)}};t.exports={start:s(!1),end:s(!0)}},1148:function(t,e,i){"use strict";var n=i("a691"),a=i("1d80");t.exports="".repeat||function(t){var e=String(a(this)),i="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},"2e8b":function(t,e,i){"use strict";i.r(e);var n=i("edf5"),a=i("7ca9");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("57f6");var o,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"5673ed9e",null,!1,n["a"],o);e["default"]=c.exports},"37db":function(t,e,i){var n=i("4bf2");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("679cdfe0",n,!0,{sourceMap:!1,shadowMode:!1})},"4bf2":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".daojishi_view[data-v-5673ed9e]{background-color:#fff4d1;height:%?210?%;margin-bottom:%?86?%;width:100%}.daojishi_view uni-text[data-v-5673ed9e]{color:#482f19;font-weight:700}.daojishi_view .t1[data-v-5673ed9e]{font-size:%?32?%}.daojishi_view .t2[data-v-5673ed9e]{font-size:%?58?%}.user_view[data-v-5673ed9e]{border:1px solid #ffda76;color:#333;font-size:%?32?%;font-weight:700;padding:%?15?% %?38?% %?15?% %?20?%}.user_view .head_img[data-v-5673ed9e]{height:%?113?%;margin-right:%?28?%;width:%?113?%}.player_list[data-v-5673ed9e]{color:#333;font-weight:700;margin-top:%?50?%;padding:0 %?30?%}.player_list .item[data-v-5673ed9e]{margin-bottom:%?10?%}.player_list .head_img[data-v-5673ed9e]{flex-shrink:0;height:%?74?%;margin-right:%?33?%;width:%?74?%}.player_list .r_view[data-v-5673ed9e]{border-bottom:1px solid #ffecdb;padding:%?30?% 0;width:100%}.player_list .input_view uni-input[data-v-5673ed9e]{margin-right:%?27?%}.com_btn[data-v-5673ed9e]{margin:%?80?% 0}",""]),t.exports=e},"4d90":function(t,e,i){"use strict";var n=i("23e7"),a=i("0ccb").start,r=i("9a0c");n({target:"String",proto:!0,forced:r},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"4f6d":function(t,e){function i(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}t.exports=i},"57f6":function(t,e,i){"use strict";var n=i("37db"),a=i.n(n);a.a},"7ca9":function(t,e,i){"use strict";i.r(e);var n=i("c803"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"9a0c":function(t,e,i){var n=i("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},a2af:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("ef26"),a=i("d123"),r=i("4f6d"),o=i("0074"),s={interval:1,delay:0,onInterval:void 0,onAbort:void 0,onComplete:void 0,onError:void 0},c=function(t){return"function"==typeof t?t:function(){}},u=function(t,e){try{c(t)()}catch(t){c(e)(t)}},l=o("options"),d=o("globalTimer"),f=o("intervalTimer"),v=o("seconds"),h=o("completed"),p=o("disposed"),m=function(){function t(e){n(this,t),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:!0}),Object.defineProperty(this,p,{writable:!0,value:!1});var i=Object.assign({},s,e);r(this,l)[l]=i}return a(t,[{key:"start",value:function(t){var e=this;if("number"!=typeof t||t<1)throw new Error("The value of duration must be a number and can not less than 1 !");this.abort();var i=r(this,l)[l],n=i.interval,a=i.delay,o=i.onInterval,s=i.onComplete,c=i.onError;r(this,v)[v]=t;var p=function(){r(e,v)[v]-=n,u((function(){return o(r(e,v)[v])}),c)},m=function(){r(e,f)[f]=clearInterval(r(e,f)[f]),r(e,h)[h]=!0,u(s,c)},g=function(){r(e,h)[h]=!1,r(e,d)[d]=setTimeout(m,1e3*t),r(e,f)[f]=setInterval(p,1e3*n)};a>0?r(this,d)[d]=setTimeout((function(){r(e,d)[d]=clearTimeout(r(e,d)[d]),g()}),1e3*a):g()}},{key:"abort",value:function(){if(function(t){if(t)throw new Error("The instance of timer has been disposed !")}(r(this,p)[p]),r(this,d)[d]=clearTimeout(r(this,d)[d]),r(this,f)[f]=clearInterval(r(this,f)[f]),!r(this,h)[h]){var t=r(this,l)[l],e=t.onAbort,i=t.onError;u(e,i)}}},{key:"dispose",value:function(){r(this,p)[p]||(this.abort(),r(this,p)[p]=!0)}}]),t}();e.default=m},c803:function(t,e,i){"use strict";i("99af"),i("d3b7"),i("25f0"),i("4d90"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i("16f0");var n=i("ee06"),a=n(i("5285")),r=i("c5a9"),o=n(i("a2af")),s=getApp(),c={data:function(){return{timer:0,roomId:0,timerStarted:!1,djsText:"00:00",player:[],userInfo:{roleHead:"",roleName:""},ticketNo:0,chaTimer:null,chaPlayerTimer:"",isEnd:!1,surplusTime:100}},onLoad:function(t){var e=this;this.setData({userInfo:uni.getStorageSync("userInfo")||{}}),this.startVote(),this.setData({chaPlayerTimer:setInterval((function(){e.VoteList()}),5e4)})},onReady:function(){},onShow:function(){this.VoteList(),uni.removeStorageSync("two_stage"),uni.removeStorageSync("two_init"),uni.removeStorageSync("two_jiemeng")},onHide:function(){},onUnload:function(){this.timer&&this.timer.dispose(),clearInterval(this.chaPlayerTimer)},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{reload:function(){this.startVote(),this.VoteList()},startVote:function(){var t=this;this.initTimer();var e=this.surplusTime;e>0?(t.setData({timerStarted:!0,djsText:"倒计时准备中，请稍等"}),t.timer&&t.timer.start(e)):(uni.setStorageSync("two_end",!0),t.setData({djsText:"倒计时已结束",isEnd:!0}))},initTimer:function(){this.timer&&this.timer.dispose();var t=this.setData.bind(this),e=new o.default({delay:0,onInterval:function(e){var i=Math.floor(e/60),n=e-60*i;t({djsText:"".concat(i.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))})},onAbort:function(){console.log("aborted")},onComplete:function(){t({djsText:"倒计时已结束"})},onError:function(t){console.log("发生错误",t)}});this.setData({timer:e})},changeBlur:function(t){var e=t.currentTarget.dataset.index,i=this.player;i[e].voteNo=+t.detail.value,this.setData({player:i})},goEnd:function(){var t=this;s.globalData.Confirm("是否确认进入阶段二").then((function(){clearInterval(t.chaPlayerTimer),t.timer&&t.timer.dispose(),t.userInfo.ticketNo=t.ticketNo,uni.setStorageSync("userInfo",t.userInfo),uni.navigateTo({url:"../../game_two/start/start"})})).catch((function(){}))},playerDesc:function(){var t="",e=this.userInfo.roleName;console.log(e),t="天子"==e?"可对任意玩家赏罚共3次，每次1张军需卡。":"董卓"==e?"本环节时间过半后，你可查看一次目前所有玩家的投资情况。":"刘备"==e?"强制让两位玩家各投1票给你主投的秀女。":"曹操"==e?"当宣布秀女票数后，你可任意追投1张军需卡。":"貂蝉"==e?"逆转一名玩家的投资票型。":"马腾"==e?"结算奖励时，你投资给第三名的军需卡不没收，而是翻倍。":"蔡文姬"==e?"当你投资其他秀女时，你可使自己获得你投资数量一半的票数":"大乔"==e?"你可在任意时间查看一次所有人对你的投资数量。":"暂无技能介绍。",uni.showModal({title:"技能介绍",content:t,showCancel:!1,confirmText:"了解"})},ChangeVote:function(t){var e=this;return r(a.default.mark((function i(){return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:s.globalData.Confirm("是否确认投票?").then(r(a.default.mark((function i(){var n,r,o,c,u;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.currentTarget.dataset.index,r=+e.userInfo.playerId,o=+e.player[n].voteNo,c=+e.player[n].voteId,i.next=6,s.globalData.Api.PlayerVote({playerId:r,voteId:c,voteNo:o});case 6:u=i.sent,s.globalData.Toast(u.message),u.isOk&&e.VoteList();case 9:case"end":return i.stop()}}),i)})))).catch((function(){}));case 1:case"end":return i.stop()}}),i)})))()},VoteList:function(){return!1}}};e.default=c},d123:function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}t.exports=n},edf5:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"user_view flex_al_sb"},[i("v-uni-view",{staticClass:"l_view flex_al"},[i("v-uni-view",{staticClass:"head_img"},[i("v-uni-image",{attrs:{mode:"widthFix",src:t.userInfo.roleHead}})],1),i("v-uni-view",{staticClass:"name"},[t._v(t._s(t.userInfo.roleName))])],1),i("v-uni-view",{staticClass:"r_view uni-flex"},[i("v-uni-text",{staticStyle:{"margin-right":"20rpx"}},[t._v("剩余票数")]),i("v-uni-input",{staticStyle:{width:"40px",display:"inline-block","text-align":"right"},attrs:{maxlength:"4",type:"text"},model:{value:t.ticketNo,callback:function(e){t.ticketNo=e},expression:"ticketNo"}})],1)],1),i("v-uni-view",{staticClass:"player_list"},t._l(t.player,(function(e,n){return i("v-uni-view",{key:e.voteId,staticClass:"item flex_al"},[i("v-uni-view",{staticClass:"head_img"},[i("v-uni-image",{attrs:{mode:"widthFix",src:e.roleHead}})],1),i("v-uni-view",{staticClass:"r_view flex_al_sb"},[i("v-uni-view",{staticClass:"name"},[t._v(t._s(e.roleName))]),i("v-uni-view",{staticClass:"input_view flex_al"},[i("v-uni-input",{attrs:{"data-index":n,placeholder:"0",type:"number"},model:{value:e.voteNo,callback:function(i){t.$set(e,"voteNo",i)},expression:"item.voteNo"}}),i("v-uni-text",[t._v("票")])],1),i("v-uni-view",{staticStyle:{border:"1rpx solid var(--color)"},attrs:{"data-index":n},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.ChangeVote.apply(void 0,arguments)}}},[t._v("变更")])],1)],1)})),1),i("v-uni-view",{staticClass:"com_btn",attrs:{hoverClass:"active"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.playerDesc.apply(void 0,arguments)}}},[t._v("技能介绍")]),i("v-uni-view",{staticClass:"com_btn",staticStyle:{"margin-top":"50rpx"},attrs:{hoverClass:"active"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.goEnd.apply(void 0,arguments)}}},[t._v("进入阶段二")])],1)},r=[]},ef26:function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=i}}]);