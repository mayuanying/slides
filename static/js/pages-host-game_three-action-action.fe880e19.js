(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-host-game_three-action-action"],{"1f4b":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-409649d2]{color:var(--color);font-weight:700}.container[data-v-409649d2]{padding-top:%?30?%}.title_view[data-v-409649d2]{font-size:%?40?%;margin-bottom:%?50?%;text-align:center}.user_view[data-v-409649d2]{border:%?1?% solid var(--color);margin-bottom:%?60?%;padding:%?20?%}.user_view .head_img[data-v-409649d2]{flex-shrink:0;height:%?163?%;width:%?165?%}.user_view .l_view[data-v-409649d2]{margin-right:%?100?%}.user_view .l_view .name[data-v-409649d2]{line-height:%?36?%;margin-left:%?20?%;width:%?36?%}.user_view .r_view .text_view[data-v-409649d2]{font-size:%?28?%;margin:%?15?% 0}.user_view .r_view .t1[data-v-409649d2]{padding-right:%?40?%}.user_view .r_view .t2[data-v-409649d2]{border-left:%?1?% solid var(--color);height:%?30?%;line-height:%?30?%;padding-left:%?40?%}.player_view .item[data-v-409649d2]{font-size:%?26?%;margin-right:%?27?%}.player_view .item[data-v-409649d2]:last-child{margin-right:0}.player_view .head_img[data-v-409649d2]{height:%?90?%;width:%?91?%}.player_view .name[data-v-409649d2]{margin-bottom:%?28?%;margin-top:%?13?%}.player_view .tip_view uni-text[data-v-409649d2]{background-color:var(--color);color:var(--fontColor);font-size:%?22?%;height:%?37?%;line-height:%?37?%;margin-bottom:%?15?%;text-align:center;width:%?82?%}.btn_list .r_jt[data-v-409649d2]{border-radius:2px;border-right:%?1?% solid var(--color);border-top:%?1?% solid var(--color);height:%?12?%;-webkit-transform:rotate(45deg);transform:rotate(45deg);width:%?12?%}.btn_list[data-v-409649d2]{margin-top:%?70?%}.btn_list .btn_box[data-v-409649d2]{background-color:#251f1a;font-size:%?30?%;margin-bottom:%?20?%;padding:%?13?% %?20?%}",""]),t.exports=e},"416b":function(t,e,a){"use strict";a.r(e);var i=a("8cc6"),n=a("f329");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("7874");var o,r=a("f0c5"),l=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"409649d2",null,!1,i["a"],o);e["default"]=l.exports},7874:function(t,e,a){"use strict";var i=a("cb4f"),n=a.n(i);n.a},"8cc6":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"title_view"},[t._v("当前回合 "+t._s(t.roundNo))]),a("v-uni-view",{staticClass:"user_view flex_al"},[a("v-uni-view",{staticClass:"l_view flex_al"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:t.player.roleHead}})],1),a("v-uni-view",{staticClass:"name"},[t._v(t._s(t.player.roleName))])],1),a("v-uni-view",{staticClass:"r_view flex_col"},[a("v-uni-view",{staticClass:"text_view flex_al"},[a("v-uni-text",{staticClass:"t1"},[t._v("兵力")]),a("v-uni-text",{staticClass:"t2"},[t._v(t._s(t.player.playerTroopNo))])],1),a("v-uni-view",{staticClass:"text_view flex_al"},[a("v-uni-text",{staticClass:"t1"},[t._v("粮草")]),a("v-uni-text",{staticClass:"t2"},[t._v(t._s(t.player.playerGrainNo))])],1)],1)],1),a("v-uni-view",{staticClass:"player_view flex",staticStyle:{display:"none"}},[a("v-uni-view",{staticClass:"item flex_col"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/touxiang.png"}})],1),a("v-uni-view",{staticClass:"name"},[t._v("蔡文姬")]),a("v-uni-view",{staticClass:"tip_view flex_col flex_al"},[a("v-uni-text",[t._v("将军")]),a("v-uni-text",[t._v("谋士")])],1)],1),a("v-uni-view",{staticClass:"item flex_col"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/touxiang.png"}})],1),a("v-uni-view",{staticClass:"name"},[t._v("蔡文姬")]),a("v-uni-view",{staticClass:"tip_view flex_col flex_al"},[a("v-uni-text",[t._v("将军")]),a("v-uni-text",[t._v("谋士")])],1)],1),a("v-uni-view",{staticClass:"item flex_col"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/touxiang.png"}})],1),a("v-uni-view",{staticClass:"name"},[t._v("蔡文姬")]),a("v-uni-view",{staticClass:"tip_view flex_col flex_al"},[a("v-uni-text",[t._v("将军")]),a("v-uni-text",[t._v("谋士")])],1)],1),a("v-uni-view",{staticClass:"item flex_col"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/touxiang.png"}})],1),a("v-uni-view",{staticClass:"name"},[t._v("蔡文姬")]),a("v-uni-view",{staticClass:"tip_view flex_col flex_al"},[a("v-uni-text",[t._v("将军")]),a("v-uni-text",[t._v("谋士")])],1)],1),a("v-uni-view",{staticClass:"item flex_col"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/touxiang.png"}})],1),a("v-uni-view",{staticClass:"name"},[t._v("蔡文姬")]),a("v-uni-view",{staticClass:"tip_view flex_col flex_al"},[a("v-uni-text",[t._v("将军")]),a("v-uni-text",[t._v("谋士")])],1)],1),a("v-uni-view",{staticClass:"item flex_col"},[a("v-uni-view",{staticClass:"head_img"},[a("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/touxiang.png"}})],1),a("v-uni-view",{staticClass:"name"},[t._v("蔡文姬")]),a("v-uni-view",{staticClass:"tip_view flex_col flex_al"},[a("v-uni-text",[t._v("将军")]),a("v-uni-text",[t._v("谋士")])],1)],1)],1),a("v-uni-view",{staticClass:"btn_list"},t._l(t.player.items,(function(e,i){return a("v-uni-view",{key:e.player,staticClass:"btn_box flex_al_sb",attrs:{"data-is":e.isActive,"data-type":e.generaId},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.caozuo.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"t1"},[t._v(t._s(e.generalSkill))]),e.isActive?a("v-uni-text",{staticClass:"r_jt"}):t._e()],1)})),1)],1)},s=[]},cb4f:function(t,e,a){var i=a("1f4b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("2bc574d2",i,!0,{sourceMap:!1,shadowMode:!1})},eb20:function(t,e,a){"use strict";a("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("ee06")(a("5285")),n=a("c5a9"),s=getApp(),o={data:function(){return{player:{roleHead:"",roleName:"",playerTroopNo:"",playerGrainNo:"",items:[]},roundNo:1}},onLoad:function(t){uni.getStorageSync("roundNo")||uni.setStorageSync("roundNo",1),this.setData({roundNo:uni.getStorageSync("roundNo")||1}),this.QueryPlayerAction()},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{QueryPlayerAction:function(){var t=this;return n(i.default.mark((function e(){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.globalData.Api.QueryPlayerAction(+uni.getStorageSync("roomId"),t.roundNo);case 2:(a=e.sent).isOk?t.setData({player:a.content}):s.globalData.Toast(a.message,"none",(function(){uni.reLaunch({url:"/pages/host/game_three/start/start"})}));case 4:case"end":return e.stop()}}),e)})))()},caozuo:function(t){var e=this,a=t.currentTarget.dataset,i=a.type,n=a.is;13==i&&s.globalData.Confirm("是否刷新技能？").then((function(){var t={roomId:+uni.getStorageSync("roomId"),playerId:+e.player.playerId,roundNo:+uni.getStorageSync("roundNo")||1,sellMode:+i,sellType:1,defenseItems:[],strikeItems:[]};s.globalData.Api.PlayerSell(t).then((function(t){t.isOk&&s.globalData.Api.QueryAuction(+uni.getStorageSync("roomId")).then((function(t){t.isOk?uni.navigateTo({url:"/pages/host/game_three/auction_fit/auction_fit"}):s.globalData.Toast(res.message,"none",(function(){uni.reLaunch({url:"/pages/host/game_three/action/action"})}))})),console.log(t)}))})).catch((function(){uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=".concat(i,"&playerId=").concat(e.player.playerId,"&sellType=2")})})),n&&(console.log(i),-1==i&&this.QueryAttackCounter(),-5==i&&uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=".concat(i,"&playerId=").concat(this.player.playerId)}),-2==i&&s.globalData.Api.PlayerNoAction({playerId:+this.player.playerId,roundNo:+uni.getStorageSync("roundNo"),roomId:+uni.getStorageSync("roomId")}).then((function(t){t.isOk&&(s.globalData.Toast(t.message,"success"),s.globalData.Api.QueryPlayerAction(+uni.getStorageSync("roomId"),uni.getStorageSync("roundNo")).then((function(t){t.isOk?e.QueryPlayerAction():s.globalData.Toast(t.message,"success",(function(){uni.reLaunch({url:"/pages/host/game_three/start/start"})}))})))})),i>0&&(console.log(i),s.globalData.Api.QueryCounter(+uni.getStorageSync("roomId"),i).then((function(t){console.log(t),t.isOk?s.globalData.Confirm("是否使用贾诩反制技能?").then((function(){s.globalData.Api.EnableCounter(+uni.getStorageSync("roomId")).then((function(t){uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=".concat(i,"&playerId=").concat(e.player.playerId)})}))})).catch((function(){uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=".concat(i,"&playerId=").concat(e.player.playerId)})})):uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=".concat(i,"&playerId=").concat(e.player.playerId)})}))))},QueryAttackCounter:function(){var t=this;return n(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.globalData.Api.QueryAddHurt(t.player.playerId);case 2:return e.sent.isOk&&s.globalData.Confirm("是否使用许褚技能?").then((function(){s.globalData.Api.EnableAddHurt(t.player.playerId).then((function(){uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=-1&playerId=".concat(t.player.playerId)})}))})).catch((function(){uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=-1&playerId=".concat(t.player.playerId)})})),e.next=6,s.globalData.Api.QueryAttackCounter(t.player.playerId);case 6:e.sent.isOk?uni.showActionSheet({alertText:"技能提醒",itemList:["1k兵力","5K兵粮"],success:function(e){s.globalData.Api.EnableGeneral(t.player.playerId,+e.tapIndex+1).then((function(e){uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=-1&playerId=".concat(t.player.playerId)})}))}}):uni.navigateTo({url:"/pages/host/game_three/cast_list/cast_list?generaId=-1&playerId=".concat(t.player.playerId)});case 8:case"end":return e.stop()}}),e)})))()}}};e.default=o},f329:function(t,e,a){"use strict";a.r(e);var i=a("eb20"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}}]);